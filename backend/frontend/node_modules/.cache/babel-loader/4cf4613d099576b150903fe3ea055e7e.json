{"ast":null,"code":"import _toConsumableArray from\"/Users/sonny/Desktop/welp-deploy/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/sonny/Desktop/welp-deploy/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sonny/Desktop/welp-deploy/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sonny/Desktop/welp-deploy/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/sonny/Desktop/welp-deploy/backend/frontend/node_modules/@babel/runtime/regenerator/index.js\";import*as React from'react';import{useState,useEffect}from'react';import Map,{Marker,Popup,GeolocateControl}from'react-map-gl';import'mapbox-gl/dist/mapbox-gl.css';import'./app.css';// import axios from \"axios\";\nimport{format}from\"timeago.js\";import Register from\"./components/Register\";import Login from\"./components/Login\";import Header from\"./components/Header\";import SimpleImageSlider from\"react-simple-image-slider\";import RoomTwoToneIcon from'@mui/icons-material/RoomTwoTone';import FmdGoodTwoToneIcon from'@mui/icons-material/FmdGoodTwoTone';import RoomRoundedIcon from'@mui/icons-material/RoomRounded';import LocationOnIcon from'@mui/icons-material/LocationOn';import RoomIcon from'@mui/icons-material/Room';import{axiosInstance}from'./config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var myStorage=window.localStorage;var _useState=useState(myStorage.getItem(\"user\")),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pins=_useState4[0],setPins=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),currentPlaceId=_useState6[0],setCurrentPlaceId=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),newPlace=_useState8[0],setNewPlace=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),desc=_useState12[0],setDesc=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),rating=_useState14[0],setRating=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),showRegister=_useState16[0],setShowRegister=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showLogin=_useState18[0],setShowLogin=_useState18[1];var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),showPopup=_React$useState2[0],setShowPopup=_React$useState2[1];var _useState19=useState({// width: \"70vh\",\n// height: \"100vh\",\nlatitude:40.702470,longitude:-73.971816,zoom:12}),_useState20=_slicedToArray(_useState19,2),viewState=_useState20[0],setViewState=_useState20[1];useEffect(function(){var getPins=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosInstance.get(\"/pins\");case 3:res=_context.sent;setPins(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getPins(){return _ref.apply(this,arguments);};}();getPins();},[]);// When the user click on a marker\nvar handleMarkerClick=function handleMarkerClick(id,lat,long){setCurrentPlaceId(id);setViewState(_objectSpread(_objectSpread({},viewState),{},{latitude:lat,longitude:long}));};var handleAddClick=function handleAddClick(e){// const [long, lat] = e.lngLat; // this is before\nvar long=e.lngLat.lng;var lat=e.lngLat.lat;setNewPlace({lat:lat,long:long});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var newPin,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();newPin={username:currentUser,title:title,desc:desc,rating:rating,lat:newPlace.lat,long:newPlace.long};_context2.prev=2;_context2.next=5;return axiosInstance.post(\"/pins\",newPin);case 5:res=_context2.sent;setPins([].concat(_toConsumableArray(pins),[res.data]));setNewPlace(null);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleLogout=function handleLogout(){myStorage.removeItem(\"user\");setCurrentUser(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Map,_objectSpread(_objectSpread({},viewState),{},{style:{width:\"100vw\",height:\"100%\"},mapStyle:\"mapbox://styles/sonnynomnom/cl140ktw8000c15qyyzbezy1u\",mapboxAccessToken:process.env.REACT_APP_MAPBOX,onMove:function onMove(evt){return setViewState(evt.viewState);},onDblClick:handleAddClick// transitionDuration=\"2000\"\n,children:[pins.map(function(p){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Marker,{latitude:p.lat,longitude:p.long,offsetLeft:-viewState.zoom*1.5,offsetTop:-viewState.zoom*3,children:/*#__PURE__*/_jsx(RoomIcon,{style:{fontSize:viewState.zoom*3,color:p.username===currentUser?\"slateblue\":\"tomato\",cursor:\"pointer\"},onClick:function onClick(){return handleMarkerClick(p._id,p.lat,p.long);},stroke:\"#707070\",\"stroke-width\":0.4})}),p._id===currentPlaceId&&/*#__PURE__*/ // <Popup \n//   latitude={p.lat}\n//   longitude={p.long}\n//   closeButton={true}\n//   closeOnClick={false}\n//   onClose={() => setCurrentPlaceId(null)}\n//   anchor=\"left\"\n// >\n_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"place\",children:p.title}),/*#__PURE__*/_jsx(\"p\",{className:\"desc\",children:p.desc}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://maps.google.com/?q=\"+p.address,target:\"_blank\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"icons\",src:\"./pin.svg\"}),p.address,\"\\xA0\\xA0\\xA0\\xA0\\xA0\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"icons\",src:\"./star.svg\"}),p.rating,\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"icons\",src:\"./clock.svg\"}),p.hours,\"\\xA0\\xA0\\xA0\\xA0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"icons\",src:\"./phone.svg\"}),p.phone]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"picture\",children:/*#__PURE__*/_jsx(SimpleImageSlider,{width:300,height:225,images:p.image,showNavs:true,navSize:30,navMargin:10,loop:false// showBullets={true}\n})}),/*#__PURE__*/_jsx(\"label\",{children:\"Review\"}),/*#__PURE__*/_jsx(\"p\",{className:\"desc\",children:p.review}),/*#__PURE__*/_jsx(\"label\",{children:\"Ratings\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cleanliness: \\xA0\\xA0\",Array(p.cleanliness).fill(\"🧻\")]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Comfort: \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",Array(p.comfort).fill(\"💩\")]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Vibes: \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",Array(p.vibes).fill(\"💅\")]}),/*#__PURE__*/_jsx(\"label\",{children:\"Information\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"username\",children:[\"Created by \",/*#__PURE__*/_jsx(\"b\",{children:p.username})]}),/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:format(p.createdAt)}),/*#__PURE__*/_jsx(\"div\",{className:\"tags\",children:p.tags.map(function(tag){return/*#__PURE__*/_jsx(\"div\",{className:\"tag\",children:tag});})})]})})]});}),newPlace&&/*#__PURE__*/_jsx(Popup,{latitude:newPlace.lat,longitude:newPlace.long,closeButton:true,closeOnClick:false,anchor:\"left\",onClose:function onClose(){return setCurrentPlaceId(null);},children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter the name of the restroom\",onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter the description of the restroom\",onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Review\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Say us something about this restroom.\",onChange:function onChange(e){return setDesc(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Rating\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",type:\"submit\",children:\"Add Restroom\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:currentPlaceId?\"filters active\":\"filters\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"filter all\",children:\"All\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter public\",children:\"\\uD83C\\uDF0E Public\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter restaurant\",children:\"\\uD83C\\uDF55 Food\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter accessible\",children:\"\\u2B50\\uFE0F 4+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter accessible\",children:\"\\u2B50\\uFE0F 3+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter accessible\",children:\"\\u267F\\uFE0F\"})]}),/*#__PURE__*/_jsx(GeolocateControl,{positionOptions:{enableHighAccuracy:true},position:'top-left',showUserLocation:true,showUserHeading:true})]}))]});}export default App;","map":{"version":3,"sources":["/Users/sonny/Desktop/welp-deploy/backend/frontend/src/App.js"],"names":["React","useState","useEffect","Map","Marker","Popup","GeolocateControl","format","Register","Login","Header","SimpleImageSlider","RoomTwoToneIcon","FmdGoodTwoToneIcon","RoomRoundedIcon","LocationOnIcon","RoomIcon","axiosInstance","App","myStorage","window","localStorage","getItem","currentUser","setCurrentUser","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","rating","setRating","showRegister","setShowRegister","showLogin","setShowLogin","showPopup","setShowPopup","latitude","longitude","zoom","viewState","setViewState","getPins","get","res","data","console","log","handleMarkerClick","id","lat","long","handleAddClick","e","lngLat","lng","handleSubmit","preventDefault","newPin","username","post","handleLogout","removeItem","width","height","process","env","REACT_APP_MAPBOX","evt","map","p","fontSize","color","cursor","_id","address","hours","phone","image","review","Array","cleanliness","fill","comfort","vibes","createdAt","tags","tag","target","value","enableHighAccuracy"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport Map, { Marker, Popup, GeolocateControl } from 'react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './app.css';\n// import axios from \"axios\";\nimport {format} from \"timeago.js\";\nimport Register from \"./components/Register\";\nimport Login from \"./components/Login\";\nimport Header from \"./components/Header\";\nimport SimpleImageSlider from \"react-simple-image-slider\";\nimport RoomTwoToneIcon from '@mui/icons-material/RoomTwoTone';\nimport FmdGoodTwoToneIcon from '@mui/icons-material/FmdGoodTwoTone';\nimport RoomRoundedIcon from '@mui/icons-material/RoomRounded';\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\nimport RoomIcon from '@mui/icons-material/Room';\nimport { axiosInstance } from './config';\n\nfunction App() {\n\n  const myStorage = window.localStorage;\n\n  const [currentUser, setCurrentUser] = useState(myStorage.getItem(\"user\"));;\n\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [rating, setRating] = useState(0);\n  \n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n\n  const [showPopup, setShowPopup] = React.useState(true);\n\n  const [viewState, setViewState] = useState({\n    // width: \"70vh\",\n    // height: \"100vh\",\n    latitude: 40.702470,\n    longitude: -73.971816,\n    zoom: 12\n  });\n    \n  useEffect(() => {\n    const getPins = async ()=> {\n      try {\n        const res = await axiosInstance.get(\"/pins\");\n        setPins(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    getPins();\n  }, []);\n\n  // When the user click on a marker\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewState({...viewState, latitude: lat, longitude: long});\n  }\n  \n  const handleAddClick = (e) => {\n    // const [long, lat] = e.lngLat; // this is before\n    const long = e.lngLat.lng;\n    const lat = e.lngLat.lat;\n\n    setNewPlace({\n      lat,\n      long,\n    })\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUser,\n      title,\n      desc,\n      rating,\n      lat: newPlace.lat,\n      long: newPlace.long\n    }\n    try {\n      const res = await axiosInstance.post(\"/pins\", newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  \n  const handleLogout = () => {\n    myStorage.removeItem(\"user\");\n    setCurrentUser(null);\n  };\n\n  return (\n    <div className=\"App\">\n      <Header/>\n      <Map\n        {...viewState}\n        style={{width: \"100vw\", height: \"100%\"}}\n        mapStyle=\"mapbox://styles/sonnynomnom/cl140ktw8000c15qyyzbezy1u\"\n        mapboxAccessToken={process.env.REACT_APP_MAPBOX}\n        onMove={evt => setViewState(evt.viewState)}\n        onDblClick={handleAddClick}\n        // transitionDuration=\"2000\"\n      >\n        {pins.map(p => (\n          <>\n          <Marker \n            latitude={p.lat}\n            longitude={p.long}\n            offsetLeft={-viewState.zoom*1.5}\n            offsetTop={-viewState.zoom*3}\n          >\n            <RoomIcon\n              style={{\n                fontSize: viewState.zoom * 3, \n                color: p.username === currentUser ? \"slateblue\" : \"tomato\", \n                cursor: \"pointer\"}}\n              onClick={()=>handleMarkerClick(p._id, p.lat, p.long)}\n              stroke={\"#707070\"} stroke-width={0.4}\n            />\n          </Marker>\n          {p._id === currentPlaceId && (\n            // <Popup \n            //   latitude={p.lat}\n            //   longitude={p.long}\n            //   closeButton={true}\n            //   closeOnClick={false}\n            //   onClose={() => setCurrentPlaceId(null)}\n            //   anchor=\"left\"\n            // >\n            <div className=\"popup\">\n              <div className=\"card\">\n                <h3 className=\"place\">{p.title}</h3>\n                <p className=\"desc\">{p.desc}</p>\n\n                <div>\n                  <a href={\"https://maps.google.com/?q=\" + p.address} target=\"_blank\"><div className=\"info\"><img className=\"icons\" src=\"./pin.svg\"></img>{p.address}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div></a>\n                  <div className=\"info\"><img className=\"icons\" src=\"./star.svg\"></img>{p.rating}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\n                  <div className=\"info\"><img className=\"icons\" src=\"./clock.svg\"></img>{p.hours}&nbsp;&nbsp;&nbsp;&nbsp;</div>\n                  <div className=\"info\"><img className=\"icons\" src=\"./phone.svg\"></img>{p.phone}</div>\n                </div>\n\n                <div className=\"picture\">\n                  <SimpleImageSlider\n                    width={300}\n                    height={225}\n                    images={p.image}\n                    showNavs={true}\n                    navSize={30}\n                    navMargin={10}\n                    loop={false}\n                    // showBullets={true}\n                  />\n                </div>\n\n                <label>Review</label>\n                <p className=\"desc\">{p.review}</p>\n\n                <label>Ratings</label>\n                <p>Cleanliness: &nbsp;&nbsp;{Array(p.cleanliness).fill(\"🧻\")}</p>\n                <p>Comfort: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Array(p.comfort).fill(\"💩\")}</p>\n                <p>Vibes: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Array(p.vibes).fill(\"💅\")}</p>\n\n                <label>Information</label>\n                <span className=\"username\">Created by <b>{p.username}</b></span>\n                <span className=\"date\">{format(p.createdAt)}</span>\n\n                <div className=\"tags\">\n                  {p.tags.map((tag) => <div className=\"tag\">{tag}</div>)}\n                </div>\n              </div>\n            {/* </Popup> */}\n            </div>\n            )\n          }\n          </>\n        ))}\n        {newPlace && (<Popup\n          latitude={newPlace.lat}\n          longitude={newPlace.long}\n          closeButton={true}\n          closeOnClick={false}\n          anchor=\"left\"\n          onClose={() => setCurrentPlaceId(null)}\n        >\n          <div>\n            <form onSubmit={handleSubmit}>\n              <label>Title</label>\n              <input \n                placeholder=\"Enter the name of the restroom\" \n                onChange={(e)=>setTitle(e.target.value)}\n              /> \n\n              <label>Description</label>\n              <input \n                placeholder=\"Enter the description of the restroom\" \n                onChange={(e)=>setTitle(e.target.value)}\n              />\n\n              <label>Review</label>\n              <textarea \n                placeholder=\"Say us something about this restroom.\" \n                onChange={(e)=>setDesc(e.target.value)}\n              />\n\n              <label>Rating</label>\n              <select onChange={(e)=>setRating(e.target.value)}>\n                <option value=\"1\">1</option>\n                <option value=\"2\">2</option>\n                <option value=\"3\">3</option>\n                <option value=\"4\">4</option>\n                <option value=\"5\">5</option>\n              </select>\n              <button className=\"submitButton\" type=\"submit\">Add Restroom</button>\n            </form>\n          </div>\n        </Popup>\n        )}\n        {/* {currentUser ? (\n          <button className=\"button logout\" onClick={handleLogout}>Log out</button>\n        ) : (\n          <div className=\"buttons\">\n            <button \n              className=\"button login\" \n              onClick={() => setShowLogin(true)}>\n                Login\n            </button>\n            <button \n              className=\"button register\"\n              onClick = {() => setShowRegister(true)}>\n                Register\n            </button>\n          </div>\n        )}\n        {showRegister && <Register setShowRegister={setShowRegister} />}\n        {showLogin && (\n          <Login \n            setShowLogin={setShowLogin} \n            myStorage={myStorage} \n            setCurrentUser={setCurrentUser}\n          />\n        )} */}\n        {/* Filters */}\n        <div className={currentPlaceId ? \"filters active\" : \"filters\"}>\n          <button className=\"filter all\">All</button>\n          <button className=\"filter public\">🌎 Public</button>\n          <button className=\"filter restaurant\">🍕 Food</button>\n          <button className=\"filter accessible\">⭐️ 4+</button>\n          <button className=\"filter accessible\">⭐️ 3+</button>\n          <button className=\"filter accessible\">♿️</button>\n        </div>\n\n        <GeolocateControl\n            positionOptions={{ enableHighAccuracy: true }}\n            position={'top-left'}\n            showUserLocation={true}\n            showUserHeading={true}\n          />\n      </Map>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}